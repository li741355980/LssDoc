1 没有正常关机，重启ubuntu的时候提示/dev/sdb1出现文件系统错误，需要手动使用fsck进行扫描和修复

2.1 fsck简介

fsck不仅可以对文件系统进行扫描，还能修正文件系统的一些问题。值得注意的是fsck 扫描文件系统时一定要在单用户模式、修复模式或把设备umount后进行。

警告：如果扫描运行中的系统，会造成系统文件损坏。

文件系统扫描工具有 fsck，fsck.ext2，fsck.jfs，fsck.msdos，fsck.vfat，fsck.ext3，fsck.reiserfs（reiserfsck）。其中fsck 默认支持文件系统ext2，如果想支持ext3文件系统的扫描，应该加-j 参数。最好是根据不同的文件系统来调用不同的扫描工具，比如 ext3的文件系统使用fsck.ext3，ext2文件系统使用fsck.etx2等。

/dev/sdb1是ext3的文件系统，只介绍fsck.ext3

fsck.ext3

[语法]

fsck.ext3[必要参数][选择参数][设备代号]

[功能]

fsck.ext3 命令：

针对ext3型文件系统进行检测

[执行权限]

超级用户 普通用户

 [参数]

必要参数

 -a 非互交模式，自动修复

 -c 检查是否存在有损坏的区块。

 -C<反叙述器> fsck.ext3命令会把全部的执行过程，都交由其逆向叙述，便于监控程序

 -d 详细显示命令执行过程

 -f 强制进行检查

 -F 检查文件系统之前，先清理该保存设备块区内的数据

 -l<损坏区块文件> 把文件中所列出的损坏区块，加入标记

 -L<损坏区块文件> 清除所有损坏标志，重新标记

 -n 非交互模式,把欲检查的文件系统设成只读

 -P<数字>  设置fsck.ext2命令所能处理的inode大小为多少

 -r 交互模式

 -R 忽略目录

 -s 顺序检查

 -S 效果和指定“-s”参数类似

 -t  显示fsck.ext2命令的时序信息。

 -v 显示详细的处理过程

 -y 关闭互动模式

选择参数

 -b<分区第一个磁区地址>  指定分区的第一个磁区的起始地址/Super Block

 -B<区块大小>  设置该分区每个区块的大小

 -I设置欲检查的文件系统，其inode缓冲区的区块数目

 -V显示版本信息

 [参考范例]

范例1： 检测磁盘

[root@linux test]# fsck.ext3 /dev/fd0

范例2： 检测磁盘并显示时序信息

[root@linux test]# fsck.ext3 -ft /dev/fd0

2.2.2查看当前的运行级别：

fsck.ext3扫描文件系统时一定要在单用户模式、修复模式或把设备umount后进行。如果扫描运行中的系统，会造成系统文件损坏。

选择在单用户模式下运行

# runlevel  ---查看运行级别

fileserver:~# runlevel

N 2

#init 1  --单用户模式（1 S），在转换成单用户模式时可能会需要输入root密码。

fileserver:~# init 1

2.2.3 使用fsck.ext3对文件系统进行扫描、修复

fileserver:~# fsck.ext3  -y /dev/sdb1  ---开始进入扫描、修正文件系统

注意红色方框，该位置需要输入yes
----------------------------------------------------------------------

这个问题的解决方案是：
输入命令 
fsck -y /dev/sdb1
reboot
